function ContextMenu(g){const v=this,f=document.createElement("DIV");if(f.classList.add("BSCM_contextmenu"),f.style.opacity="1",!g)return console.error("No object passed.");if(!g.items)return console.error("No context menu items.");const w=["light","dark","deviceTheme"];if(g.theme){let u=!1;for(let D in w)if(g.theme===w[D])u=!0;if(u===!0)f.classList.add(`BSCM_${g.theme}`)}function z(u,D){for(let y=0;y<D.length;y++){if(D[y]===1){const N=document.createElement("DIV");N.classList.add("BSCM_separator"),u.insertAdjacentElement("beforeend",N);continue}if(!D[y].name)console.error(`Item ${y} does not have a name.`);const L=document.createElement("DIV");if(L.index=y,L.classList.add("BSCM_item"),u.insertAdjacentElement("beforeend",L),L.innerHTML=D[y].name,D[y].disabled)L.classList.add("BSCM_itemDisabled");if(D[y].items){L.classList.add("BSCM_nestedContainer");const N=document.createElement("DIV");N.classList.add("BSCM_nested"),L.insertAdjacentElement("beforeend",N);try{z(N,D[y].items)}catch(k){console.error(k)}u.insertAdjacentElement("beforeend",L);continue}L.onclick=(N)=>{N.target.style.animationName="BSCM_flash",setTimeout(()=>{N.target.style.animationName="",v.close(),D[N.target.index]?.action()},200)}}}z(f,g.items),this.attach=(u)=>{if(!u)return console.error("No element passed to attach to.");try{const D=u.concat([]);for(let y of D)A(f,y)}catch(D){console.error(D)}},this.close=()=>{f.open=!1,f.style.transition="0.3s",f.style.opacity="0",setTimeout(()=>{f.style.transition="0",f.remove()},200)};function A(u,D){D.oncontextmenu=(y)=>{y.preventDefault();const L={x:y.clientX,y:y.clientY};if(u.open===!0)u.style.transition="0.3s opacity",setTimeout(()=>{u.style.opacity="0",setTimeout(()=>{u.style.transition="0s opacity",N(),u.style.opacity="1"},200)},0),u.open=!0;else u.style.opacity="1",N(),u.style.transition="0";function N(){u.style.top=`${L.y}px`,u.style.left=`${L.x}px`,k(u,L.x,L.y)}document.body.appendChild(u),u.open=!0;function k(q,B,E){const j=q.getBoundingClientRect();if(j.left+j.width>window.innerWidth)q.style.left=`${B-j.width}px`;if(j.top+j.height>window.innerHeight)q.style.top=`${E-j.height}px`}},window.addEventListener("click",(y)=>{if(u.open===!1){u.style.transition="0";return}if((y.target.classList[0]||" ").toString().includes("BSCM"))return;v.close()})}}export{F as ContextMenu};
