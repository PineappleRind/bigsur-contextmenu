class ContextMenu{constructor(e){let n;n=document.createElement("DIV");n.classList.add("BSCM_contextmenu");n.style.opacity="1";if(!e)return console.error(new Error("No object passed."));if(!e.items)return console.error(new Error("No context menu items."));function i(o,r){for(let n=0;n<r.length;n++){if(!r[n].name){console.error(new Error("Item "+n+" does not have a name."))}let t=document.createElement("DIV");t.classList.add("BSCM_item");o.insertAdjacentElement("beforeend",t);t.innerHTML=r[n].name;if(r[n].disabled){t.classList.add("BSCM_itemDisabled")}if(r[n].items){t.classList.add("BSCM_nestedContainer");let e=document.createElement("DIV");e.classList.add("BSCM_nested");t.insertAdjacentElement("beforeend",e);try{i(e,r[n].items)}catch(e){console.error(e)}o.insertAdjacentElement("beforeend",t);continue}t.onclick=()=>{if(!r[n].action)return;try{r[n].action()}catch(e){console.error(e)}}}}i(n,e.items);this.attach=t=>{if(!t){let e=new Error("No element passed to attach to.");console.error(e)}if(t.length){for(let e=0;e<t.length;e++){o(n,t[e])}return}try{o(n,t)}catch(e){console.log(e)}};function o(o,e){e.oncontextmenu=e=>{let t={x:e.clientX,y:e.clientY};o.style.opacity="1";o.style.top=t.y+"px";o.style.left=t.x+"px";e.preventDefault();document.body.appendChild(o);let n=o.getBoundingClientRect();if(n.left+n.width>window.innerWidth)o.style.left=t.x-n.width+"px";if(n.top+n.height>window.innerHeight)o.style.top=t.y-n.height+"px";o.open=true};onclick=e=>{if(o.open==false)return;let t=e.target.classList[0]||" ";if(t.toString().includes("BSCM")){return}else{o.open=false;o.style.opacity="0";setTimeout(function(){o.remove()},200)}}}}}