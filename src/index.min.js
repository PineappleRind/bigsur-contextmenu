class ContextMenu{constructor(e){let t;if((t=document.createElement("DIV")).classList.add("BSCM_contextmenu"),t.style.opacity="1",!e)return console.error(new Error("No object passed."));if(!e.items)return console.error(new Error("No context menu items."));let n=["light","dark","deviceTheme"];if(e.theme){let o=!1;for(const t in n)console.log(n[t]),e.theme===n[t]&&(o=!0);1==o&&t.classList.add("BSCM_"+e.theme)}function o(e,t){t.oncontextmenu=(t=>{let n=t.clientX,o=t.clientY;e.style.opacity="1",e.style.top=o+"px",e.style.left=n+"px",e.style.transition="0",t.preventDefault(),document.body.appendChild(e);let s=e.getBoundingClientRect();s.left+s.width>window.innerWidth&&(e.style.left=n-s.width+"px"),s.top+s.height>window.innerHeight&&(e.style.top=o-s.height+"px"),e.open=!0}),onclick=(t=>{if(0==e.open)return e.style.transition="0";(t.target.classList[0]||" ").toString().includes("BSCM")||(e.open=!1,e.style.transition="0.3s",e.style.opacity="0",setTimeout(function(){e.style.transition="0",e.remove()},200))})}!function e(t,n){for(let o=0;o<n.length;o++){if(1===n[o]){let e=document.createElement("DIV");e.classList.add("BSCM_separator"),t.insertAdjacentElement("beforeend",e);continue}n[o].name||console.error(new Error("Item "+o+" does not have a name."));let s=document.createElement("DIV");if(s.classList.add("BSCM_item"),t.insertAdjacentElement("beforeend",s),s.innerHTML=n[o].name,n[o].disabled&&s.classList.add("BSCM_itemDisabled"),n[o].items){s.classList.add("BSCM_nestedContainer");let i=document.createElement("DIV");i.classList.add("BSCM_nested"),s.insertAdjacentElement("beforeend",i);try{e(i,n[o].items)}catch(e){console.error(e)}t.insertAdjacentElement("beforeend",s)}else s.onclick=(()=>{s.style.animationName="BSCM_flash",setTimeout(function(){s.style.animationName=null,n[o].action&&n[o].action()},200)})}}(t,e.items),this.attach=(e=>{if(!e){let e=new Error("No element passed to attach to.");console.error(e)}if(e.length)for(let n=0;n<e.length;n++)o(t,e[n]);else try{o(t,e)}catch(e){console.log(e)}})}}